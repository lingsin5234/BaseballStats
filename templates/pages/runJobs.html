{% include 'partials/header.html' %}
    <h1>Run Jobs</h1>
    <form method="post">
    <!--form id="extract" class="btn-group btn-group-toggle" data-toggle="buttons" method="post">
        <label for="extract" class="btn btn-primary">
            <input type="radio" value="2018">2018<br>
        </label>
        <label for="extract" class="btn btn-primary">
            <input type="radio" value="2017">2017<br>
        </label>
        <label for="extract" class="btn btn-primary">
            <input type="radio" value="2016">2016<br>
        </label-->
        {% csrf_token %}
        <button type="submit" name="extract_2018">Extract Year</button>
    </form>

    <form method="post">
        {% csrf_token %}
        <button type="submit" name="process_data">Process Data</button>
    </form>

    <script>
        var results = JSON.parse('{{results|safe}}');
        var columns = ["process_name", "data_year", "team_name", "time_elapsed", "timestamp"];
        var table = d3.select("body").append("table");
        var header = table.append("thead").append("tr");
        var tablebody = table.append("tbody");

        // edit the header of table
        header
            .selectAll("th")
            .data(columns)
            .enter()
            .append("th")
            .text(function(c) { return c; });
        // edit the rows, split into rows then cells
        rows = tablebody
            .selectAll("tr")
            .data(results)
            .enter()
            .append("tr");
        // for each row, we split the values being sent to the cell
        cells = rows.selectAll("td")
            .data(function(d) {
                return columns.map(function(c) {
                    return {
                        column: c,
                        value: d[c]
                    };
                });
            })
            .enter()
            .append("td")
            .text(function(r) {
                return r.value;
            });
    </script>

{% include 'partials/footer.html' %}
